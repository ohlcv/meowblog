{% extends 'core/base.html' %}
{% load blog_extras %}

{% block title %}ç®¡ç†å‘˜åˆ é™¤æ–‡ç«  - Meow Blog{% endblock %}

{% block content %}
    <div class="fade-in-up" style="max-width: 700px; margin: 0 auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem;">
            <h1 style="margin: 0; color: #dc3545; font-size: 2.5rem; font-weight: 300;">
                {% if is_admin_delete %}
                    ğŸ”¨ ç®¡ç†å‘˜åˆ é™¤æ–‡ç« 
                {% else %}
                    ğŸ—‘ï¸ åˆ é™¤æ–‡ç« 
                {% endif %}
            </h1>
            <a href="{% get_post_url post %}" class="btn-back">â† è¿”å›æ–‡ç« </a>
        </div>
        
        {# æ˜¾ç¤ºæ¶ˆæ¯ - ç”±å…¨å±€JavaScriptç³»ç»Ÿå¤„ç† #}
        {% if messages %}
            <div style="display: none;">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <div class="card" style="border-left: 4px solid #dc3545;">
            <div style="background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%); padding: 2rem; border-radius: 1rem; margin-bottom: 2rem;">
                {% if is_admin_delete %}
                    <h3 style="margin: 0 0 1rem 0; color: #721c24; display: flex; align-items: center; gap: 0.5rem;">
                        ğŸš¨ ç®¡ç†å‘˜æ“ä½œè­¦å‘Š
                    </h3>
                    <ul style="margin: 0; padding-left: 1.5rem; color: #721c24; line-height: 1.6;">
                        <li>æ‚¨æ­£åœ¨ä»¥è¶…çº§ç®¡ç†å‘˜èº«ä»½åˆ é™¤å…¶ä»–ç”¨æˆ·çš„æ–‡ç« </li>
                        <li>æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤æ–‡ç« åŠå…¶æ‰€æœ‰è¯„è®º</li>
                        <li>åˆ é™¤åæ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œ</li>
                        <li>å»ºè®®å…ˆä¸æ–‡ç« ä½œè€…æ²Ÿé€š</li>
                    </ul>
                {% else %}
                    <h3 style="margin: 0 0 1rem 0; color: #721c24; display: flex; align-items: center; gap: 0.5rem;">
                        âš ï¸ ç¡®è®¤åˆ é™¤æ–‡ç« 
                    </h3>
                    <ul style="margin: 0; padding-left: 1.5rem; color: #721c24; line-height: 1.6;">
                        <li>æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤æ‚¨çš„æ–‡ç« åŠå…¶æ‰€æœ‰è¯„è®º</li>
                        <li>åˆ é™¤åæ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œ</li>
                    </ul>
                {% endif %}
            </div>
            
            <div style="background: white; border: 2px solid #e9ecef; border-radius: 1rem; padding: 2rem; margin-bottom: 2rem;">
                <h4 style="margin: 0 0 1rem 0; color: #2c3e50;">ğŸ“„ æ–‡ç« ä¿¡æ¯</h4>
                <div style="display: grid; gap: 0.75rem; color: #495057;">
                    <p style="margin: 0;"><strong>æ ‡é¢˜ï¼š</strong>{{ post.title }}</p>
                    <p style="margin: 0;"><strong>ä½œè€…ï¼š</strong>{{ post.author.username }}</p>
                    <p style="margin: 0;"><strong>åˆ›å»ºæ—¶é—´ï¼š</strong>{{ post.created_at|date:"Yå¹´mæœˆdæ—¥ H:i" }}</p>
                    {% if post.category %}
                        <p style="margin: 0;"><strong>åˆ†ç±»ï¼š</strong>{{ post.category.name }}</p>
                    {% else %}
                        <p style="margin: 0;"><strong>åˆ†ç±»ï¼š</strong>æœªåˆ†ç±»</p>
                    {% endif %}
                    <p style="margin: 0;"><strong>å­—æ•°ï¼š</strong>{{ post.word_count }} å­—</p>
                    <p style="margin: 0;"><strong>è¯„è®ºæ•°ï¼š</strong>{{ post.comments.count }} æ¡</p>
                </div>
                
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 0.5rem;">
                    <p style="margin: 0; color: #6c757d; font-size: 0.9rem;"><strong>æ–‡ç« é¢„è§ˆï¼š</strong></p>
                    <p style="margin: 0.5rem 0; color: #495057; line-height: 1.6;">
                        {{ post.content|truncatewords:50 }}
                    </p>
                </div>
            </div>

            <form method="post" style="margin-top: 2rem;">
                {% csrf_token %}
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button type="submit" class="btn btn-danger" style="padding: 1rem 2rem; font-weight: 600;">
                        {% if is_admin_delete %}
                            ğŸ”¨ ç¡®è®¤åˆ é™¤ï¼ˆç®¡ç†å‘˜æ“ä½œï¼‰
                        {% else %}
                            ç¡®è®¤åˆ é™¤
                        {% endif %}
                    </button>
                    <a href="{% get_post_url post %}" class="btn btn-secondary" style="padding: 1rem 2rem;">
                        âŒ å–æ¶ˆ
                    </a>
                </div>
            </form>
        </div>
    </div>
    
    <style>
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem !important;
            }
            
            .card {
                padding: 1.5rem !important;
            }
            
            .fade-in-up > div:first-child {
                flex-direction: column !important;
                gap: 1rem !important;
            }
        }
    </style>
{% endblock %}