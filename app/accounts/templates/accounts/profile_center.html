{% extends 'core/base.html' %}

{% block title %}
    {% if is_own_page %}
        ä¸ªäººä¸­å¿ƒ - Meow Blog
    {% else %}
        {{ target_user.username }} çš„ä¸ªäººä¸­å¿ƒ - Meow Blog
    {% endif %}
{% endblock %}

{% block content %}
    <div class="fade-in-up page-container">
        <div class="page-header">
            <div class="page-header-content">
                <div class="page-header-title">
                    <h1 class="page-title">
                        {% if is_own_page %}
                            ğŸ± ä¸ªäººä¸­å¿ƒ
                        {% else %}
                            ğŸ‘¤ {{ target_user.username }} çš„ä¸ªäººä¸­å¿ƒ
                        {% endif %}
                    </h1>
                </div>
                {% if not is_own_page %}
                    <div class="page-header-actions">
                        <a href="{% url 'blog:post_list' %}" class="btn-back">â† è¿”å›æ–‡ç« åˆ—è¡¨</a>
                    </div>
                {% endif %}
            </div>
        </div>
        
        {# æ˜¾ç¤ºæ¶ˆæ¯ - ç”±å…¨å±€JavaScriptç³»ç»Ÿå¤„ç† #}
        {% if messages %}
            <div style="display: none;">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}


        {# å¿«é€Ÿæ“ä½œåŒºåŸŸ - çºµå‘å¸ƒå±€ #}
        <div class="page-content">
            <div class="vertical-layout">
                {# ç®¡ç†å‘˜åŠŸèƒ½åŒºåŸŸ - åªåœ¨ç®¡ç†å‘˜æŸ¥çœ‹è‡ªå·±çš„ä¸ªäººä¸­å¿ƒæ—¶æ˜¾ç¤º #}
                {% if is_own_page and user.is_superuser %}
                    <div class="card action-card admin-card" data-url="{% url 'accounts:admin_panel' %}">
                        <div class="card-header">
                            <div class="card-icon">ğŸ”¨</div>
                            <div class="card-title-section">
                                <h3 class="card-title">ç®¡ç†å‘˜é¢æ¿</h3>
                                <p class="card-description">ç³»ç»Ÿç®¡ç†åŠŸèƒ½ï¼Œç”¨æˆ·ç®¡ç†ã€å†…å®¹å®¡æ ¸ã€ç³»ç»Ÿè®¾ç½®</p>
                            </div>
                        </div>
                        <div class="btn btn-danger">è¿›å…¥ç®¡ç†</div>
                    </div>
                {% endif %}
                
                {# ç¨¿ä»¶ç®¡ç†éƒ¨åˆ† #}
                <div class="card action-card" data-url="{% if is_own_page %}{% url 'accounts:manuscript_management' %}{% else %}{% url 'accounts:user_manuscript_management' user_id=target_user.id %}{% endif %}">
                    <div class="card-header">
                        <div class="card-icon">ğŸ“</div>
                        <div class="card-title-section">
                            <h3 class="card-title">ç¨¿ä»¶ç®¡ç†</h3>
                            <p class="card-description">
                                {% if is_own_page %}
                                    ç®¡ç†æ–‡ç« åˆ†ç±»å’Œæ–‡ç« å†…å®¹ï¼Œç»„ç»‡ä½ çš„åˆ›ä½œå†…å®¹
                                {% else %}
                                    æŸ¥çœ‹ {{ target_user.username }} çš„æ–‡ç« åˆ†ç±»å’Œåˆ›ä½œå†…å®¹
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    <div class="btn btn-primary">è¿›å…¥ç®¡ç†</div>
                </div>
                
                {# è´¦æˆ·è®¾ç½®éƒ¨åˆ† - åªæœ‰è‡ªå·±å¯ä»¥è®¿é—® #}
                {% if is_own_page %}
                    <div class="card action-card" data-url="{% url 'accounts:user_settings' %}">
                        <div class="card-header">
                            <div class="card-icon">âš™ï¸</div>
                            <div class="card-title-section">
                                <h3 class="card-title">è´¦æˆ·è®¾ç½®</h3>
                                <p class="card-description">ä¿®æ”¹å¯†ç å’Œä¸ªäººä¿¡æ¯ï¼Œä¸ªæ€§åŒ–è®¾ç½®</p>
                            </div>
                        </div>
                        <div class="btn btn-primary">è¿›å…¥è®¾ç½®</div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <style>
        .stat-item {
            transition: all 0.3s ease;
        }
        
        .stat-item:hover {
            transform: scale(1.05);
        }
        
        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .action-card[data-url*="user_settings"]:hover {
            box-shadow: 0 10px 30px rgba(251, 114, 153, 0.3);
        }
        
        .action-card[data-url*="admin_panel"]:hover {
            box-shadow: 0 10px 30px rgba(220, 53, 69, 0.4);
            transform: translateY(-8px);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem !important;
            }
            
            .card {
                padding: 1.5rem !important;
            }
        }
    </style>
    
    <script>
        // ä¸ºæ“ä½œå¡ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            const actionCards = document.querySelectorAll('.action-card');
            actionCards.forEach(function(card) {
                card.addEventListener('click', function() {
                    const url = this.getAttribute('data-url');
                    if (url) {
                        window.location.href = url;
                    }
                });
            });
        });
    </script>
{% endblock %}